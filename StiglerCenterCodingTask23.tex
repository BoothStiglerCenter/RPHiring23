\documentclass[11pt, letterpaper, twoside]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{fancyhdr}
\usepackage[margin=1in, include foot]{geometry}
\usepackage{ragged2e}
\usepackage[]{hyperref}
\usepackage{apacite}
\usepackage{setspace}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{etoolbox}
\usepackage{graphicx}
\usepackage{amsmath, amssymb}
\usepackage{cleveref}
\usepackage{wrapfig}
\usepackage{afterpage}
\usepackage{floatrow}
\usepackage{tikz}
\usepackage{booktabs}
\usepackage{siunitx}
\usepackage{dcolumn}
\usepackage{pdflscape}
\usepackage{adjustbox}
\usepackage{tablefootnote}
\usepackage{multicol}
\usepackage{enumitem}


\renewcommand{\thesubsection}{\thesection\Alph{subsection}}
\setlength{\parindent}{0pt}
\floatsetup[table]{capposition=top}



\title{\textbf{Stigler Center: 2022-23 Research Professional Coding Task}}
\date{Fall, 2022}
\author{George J. Stigler Center for Study of the Economy and the State\thanks{\href{https://www.chicagobooth.edu/research/stigler}{https://www.chicagobooth.edu/research/stigler}}}

\begin{document}

\maketitle

\section*{Instructions}
Please complete the following tasks and submit the required materials by the designated deadline. Ensure that you follow the directions carefully and submit all requested materials.

\subsection*{General}
Both the code and the results that you submit should be legible to your peers and those who would be your supervisors. That is, ensuring that your code is well-documented and well-commented; and that your written reports and data visualizations clearly convey your analysis is of the utmost importance.\\

Additionally, writing easily manageable and reproducible code is critical for research. For each task, please write a \verb|README| that describes each of the files that you have created/used and what each does. This should be written so that a user with a technical background but with no knowledge of the task itself can understand your code and reproduce all of the output products with minimal (if any!) changes to the code itself.\\

When submitting your materials please submit all your materials in a single compressed \verb|.zip| file named as follows:
\begin{itemize}
    \item \verb|[firstname]_[lastname].zip|
\end{itemize}
That \verb|.zip| file should contain three folders (\verb|task1a|, \verb|task1b|, and \verb|task2|). See below for additional submission details. Please ensure that all filenames are all lowercase.\\

If examples are given, follow them closely. Good luck and have fun!

\subsection*{Disclaimers}
The contents of this coding activity are \textbf{confidential}. Do \textsc{not} share this document or any of the attached material with anyone. Sharing of these instructions or any associated materials will result in your immediate disqualification and may preclude you from future opportunities with the University of Chicago.

\newpage

\section{Python and Web Scraping}

\subsection{\textit{American Economic Review}}
Using Python, collect publication data from the \textit{American Economic Review}. Using Python and your choice of packages (for example \href{https://www.crummy.com/software/BeautifulSoup/bs4/doc/}{BeautifulSoup}, \href{https://selenium-python.readthedocs.io/}{Selenium}, or \href{https://requests.readthedocs.io/en/latest/}{requests}) and \href{https://pandas.pydata.org/docs/}{Pandas}, collect the following information for all available issues:


\begin{itemize}
    \item Volume number;
    \item a hyperlink; and
    \item issue-date information.
\end{itemize}   


Store the collected issue-level data in a \verb|.csv| file. Your resultant spreadsheet should be structured follows:

\input{table1a_eg.tex}

\textit{Inside} a folder named \verb|task1a| save your README (use any widely used text format you desire, such as markdown: \verb|.md|), code, and spreadsheet as follows:
\begin{itemize}
    \item \verb|task1a_[firstname]_[lastname]_README.md|
    \item \verb|task1a_[firstname]_[lastname].csv|
    \item \verb|task1a_[firstname]_[lastname].[py/ipynb]|
\end{itemize}

\subsection{\textit{American Economic Review}: Redux}
Note that each article published by the \textit{American Economic Review} is labeled with JEL codes which describe to which field(s) and subfield(s) the article contributes. Each alphanumeric JEL code is associated with a human-readable description. Using the same packages as above, construct a \textit{second} spreadsheet that contains the following bibliographic information:

\begin{multicols}{2}
    \begin{itemize}
        \item volume and issue number;
        \item issue-date information;
        \item the article's title;
        \item the article's author(s);
        \item the article's print page-numbers;
        \item a \textit{permanent link} to the article;
        \item the article's JEL code(s); and 
        \item the article's JEL code description(s).
    \end{itemize}   
\end{multicols}

Store the collected issue-JEL-code-level data in a \verb|.csv| file.\footnote{Hint: make sure that you only collect \textit{scholarly} articles -- check the list of JEL codes carefully!} Your resultant spreadsheet should be structured as below:\\

\textit{Inside} a folder named \verb|task1b| save your README (use any widely used text format you desire, such as plaintext: \verb|.txt|), code, and spreadsheet as follows:
\begin{itemize}
    \item \verb|task1b_[firstname]_[lastname]_README.txt|
    \item \verb|task1b_[firstname]_[lastname].csv|
    \item \verb|task1b_[firstname]_[lastname].[py/ipynb]|
\end{itemize}

\begin{landscape}
    \thispagestyle{empty}
    \input{table1b_eg.tex}
\end{landscape}

\section{Data Analysis}

For this task feel free to use the software program/suite of your choice. However, for purposes of reproducibility, Stata, R, or Python are preferred.

For this task, you should have received the following files\footnote{These files might require some cleaning before use. Make sure to keep copies of the originals so that your work can by replicated!}:
\begin{itemize}
    \item \verb|state_chars_text.csv|: some information about state-level institutional characteristics
    \item \verb|law_firms_donations.csv|: donations data -- donations made by \textit{law firms}
    \item \verb|lawyers_donations.csv|: donations data -- donations made by \textit{lawyers}
    \item \verb|nonlaw_firms_donations.csv| donations data -- donations made by non-lawfirm \textit{firms}
    \item \verb|nonlaw_indivs_donations.csv| donations data -- donations made by non-lawyer \textit{individuals} 
\end{itemize}

\subsection*{Background}
In this short task you will conduct a preliminary analysis regarding the role of state-level institutional characteristics and donations to the electoral campaigns of state supreme court judges in the United States. In more than 20 states, state supreme court judges (the term used to describe judges who sit on that state's court of final appeal) are elected by state residents, rather than being appointed by a state executive. The merits of having elected, rather than appointed judges, are unclear. At once, elected judges both embody the virtue of being responsive to a democratic electorate and are subject to those same democratic pressures that may undermine their impartiality. 

\subsubsection*{Donations}
As with other elections in the United States, individuals and corporations can make contributions to a candidate's campaign; those contributions can be spent on making advertisements, facilitating a candidate's travel for campaigning purposes, hiring support staff, etc.\footnote{Note that direct donations to campaigns are \textit{different} from contributions to ``independent expenditure'' groups, so-called ``super PACs.'' Donation data is for individuals and firms has been separated because different contribution limits may apply.} Each state has slightly different rules about limits on donations and what must be disclosed when individuals or organization make those donations but in all states, those donations are a matter of public record. You have been provided with data that tracks donations to candidates who ran for a state supreme court seat between 1996 and 2016.

\subsubsection*{Institutional Characteristics}
In the United States, the structure of each state's government is determined by that state's own constitution. Consequently, there is considerable variation in the characteristics of each state's judiciary.\footnote{For a bit more background or detail, follow \href{https://www.brennancenter.org/judicial-selection-map}{this link.}} Examples of such characteristics include but are not limited to:
\begin{itemize}
    \item Initial selection method. Some states' supreme court judges are only ever appointed by the executive. Others must win election.
    \item Subsequent selection method. In some states, judges can serve until retirement age or for life. In others, judges must consistently run for re-election. The types of those re-election competitions also vary from state to state.
    \item The length of the terms (and if there is a limit to the number of terms) that supreme court judges can serve.
    \item The number of judges who serve on the state's supreme court bench at any time.
\end{itemize}
You have been provided with a spreadsheet that contains various state-level institutional characteristics. 

\subsection*{Task}

Your task is to reorganize and clean the provided data, perform a preliminary data analysis, and write a short report describing the results of your work. If a task is specified in the below instructions, it must be completed. However, a fully discursive set of instructions are not provided because we are interested in seeing how you independently work to ask and answer research questions.

\begin{enumerate}
    \item For this task, rename variables as you wish but if you do rename variables make sure the new names are descriptive and that they are readily interpretable. 
    \item Add three new dichotomous variables to the state-characteristics dataset. If you think the coding could be ambiguous, describe your methodology and provide a justification for your decisions.
    \begin{enumerate}[label=\alph*.]
        \item \verb|binding_commission|: coded as 1 if mid-term vacancies are filled by candidates suggested by a binding commission.
        \item \verb|partisan_election|: coded as 1 if candidates face a partisan-election in their first election. 
        \item \verb|retention|: coded as 1 if incumbent candidates face a retention election for subsequent terms.
    \end{enumerate}
    \item Compute the minimum, maximum, median, the 25tha and 75th percentiles, and mean donation size by individuals \textit{for each state} over all races in states that have term-lengths of 8 years. Compute the same statistics only for lawyer-individuals. Present the results in a table. 
    \item Create a new dataframe/spreadsheet that aggregates all donations at the candidate-race level. Produce histograms that show the frequency of total-contributions by the candidates' political party affiliation. Use a log-adjusted horizontal axis for your histogram.
    \item Identify the top 10 largest law firm donors in Illinois. Compute a law firm's donations as the sum of all donations to all candidates in all races in the state. Present the firm names and the sum of their donations in a table.
    \item Identify the top 10 largest non-lawyer-individual donors who donated at least once to any race in a state that has a statutory/constitutional provision to run retention elections for a judge's subsequent terms. Compute an individual's donations as the sum of all donations to all candidates in all races in the sample. Present the individual names, the states in which they donated to races, and the sum of their donations in a table.\footnote{Hint: your table should only contain 10 rows.} 
    \item Conduct some analysis to try to determine:
    \begin{enumerate}[label=\alph*.]
        \item if any of a state's institutional characteristics affect donation behavior; and 
        \item whether that donation behavior affects election outcomes.
    \end{enumerate}
    Use summary statistics, regression analysis, and data visualization as you see fit.
\end{enumerate}

Please perform the above tasks and write a report discussing the key steps and decisions you made when exploring the data (and how those may have affected your results). Your objective here is to use the data \textit{provided} to establish a compelling argument for the validity of your methodology and, therefore, whatever results you find. Your report can make use of tables with descriptive/summary statistics, data visualizations, regression analysis, or other qualitative information you see fit to include. If you do include regression analysis in your report, please ensure that each specification is at some point accompanied with an interpretation of those results.\\

Your report should also include a conclusion section that: 1) summarizes your results; 2) identifies the limitations of the dataset provided (and potentially your methodology); and 3) additional analysis you would perform if you had access to any dataset of your choice.\\

\textit{Inside} a folder named \verb|task2| save all of the data files you use, your README (use any widely used text format you desire, such as PDF: \verb|.pdf|), any code you may have written to clean/analyze the data and/or compile your report, and any miscellaneous files that might be required to reproduce your report from scratch. Please ensure that your report is submitted as a widely used text format. Acceptable file types include \verb|.docx|, \verb|.pdf|, \verb|.md| etc. Ensure that your \textit{report} is named as follows.
\begin{itemize}
    \item \verb|task2_report_[firstname]_[lastname].[pdf/docx/md]|
\end{itemize}
Other auxillary files should follow a similar convention but can be named as you see fit.

\end{document}